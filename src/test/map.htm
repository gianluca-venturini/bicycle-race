<html>
<head>
	<link rel="stylesheet" href="../style/leaflet.css" />
	<script src="../library/leaflet.js"></script>
	<script src="../library/d3.v3.min.js"></script>
	<script src="graphic_manager.js"></script>
	<script src="component1.js"></script>
	<script src="component2.js"></script>
	<style>
		#map {
			height: 100%;
		}
		.submap {
			border: solid 1px black;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<script>
		var gm = new GraphicManager();
		gm.createMap("map","normal");	

		// Create two svg with graphic manager
		var svg1 = gm.addSvg(0.5 ,0.1, 0.1, 0.1);
		var svg2 = gm.addSvg(0.2, 0.1, 0.1, 0.1);
		var svg3 = gm.addSvg(0.2, 0.5, 0.1, 0.3);

		// Allocate javascript objects that will manage this SVGS
		var c1 = new Component1(svg1);
		var c2 = new Component1(svg2);
		var c3 = new Component2(svg3);

		// Draw the SVGs
		c1.draw();
		c2.draw();
		c3.draw();

		// Set interactions
		c1.setPressCallback(c2.changeColor.bind(c2));
		c2.setPressCallback(c1.changeColor.bind(c1));

		gm.addSubMap(0.6, 0.1, 0.4, 0.4, "map2", "satellitar");
		gm.addSubMap(0.6, 0.5, 0.4, 0.4, "map3", "lol");

		gm.updateWindow();

		// Need this call in  order to inform the graphics manager that something changed
		window.onresize=gm.updateWindow.bind(gm);
		
	</script>
</body>
</html>